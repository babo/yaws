<html>
<erl>
out(A) ->
     case chat:check_session(A) of
        {ok, Session} ->
	     chat:dynamic_headers();
	Error ->
	     Error++[break]
     end.
</erl>

<script>

function handleEnter(event) {
   if (event == null) 
      event = window.event;

   var keyCode = event.keyCode ? event.keyCode : event.which ?
		      event.which : event.charCode;

   if (keyCode == 13) {
     sendmsg();
     return false;
   }
}

function addSmiley(ref) {
   var text = document.getElementById("msg");

   text.value = text.value+"<img src='"+ref+"'>";

   text.focus();

   return false;
}

</script>

<style>

body {
        font: 10px/15px Verdana, Lucida, Arial, sans-serif;
}

h1 {
        font: 15px/20px Verdana, Lucida, Arial, sans-serif;
        font-weight: bold;
}

#msgs {
       border:1px solid #ccc;
       height: 25em;
       width: 500px;
       background-color: #f5f5ff;
       overflow: auto;
       float: left;
       padding: 2px;
}

#members {
       border:1px solid #ccc;
       height: 25em;
       width: 100px;
       background-color: #f5f5ff;
       overflow: auto;
       margin: 2px;
       padding: 2px;
}

#msg {
	width: 614px;
	clear: both;
}

</style>

<script src="chat.js"></script>

<body onload="setTimeout('reader_init0()', 0);" onunload="stop_all()">


<H1> Welcome to the chat room </h1>

<div id="msgs"></div>
<div id="members"></div>

<textarea id="msg" rows="3"  value=""
          onKeyPress="return handleEnter(event)">
</textarea>
<br>

<img src='smile.png' onmousedown="return addSmiley('smile.png')"></img>
<img src='angel.png' onmousedown="return addSmiley('angel.png')"></img>
<img src='bigsmile.png' onmousedown="return addSmiley('bigsmile.png')"></img>
<img src='burp.png' onmousedown="return addSmiley('burp.png')"></img>
<img src='cool.png' onmousedown="return addSmiley('cool.png')"></img>
<img src='crossedlips.png' onmousedown="return addSmiley('crossedlips.png')"></img>
<img src='cry.png' onmousedown="return addSmiley('cry.png')"></img>
<img src='embarrassed.png' onmousedown="return addSmiley('embarrassed.png')"></img>
<img src='farted.png' onmousedown="return addSmiley('farted.png')"></img>
<img src='kiss.png' onmousedown="return addSmiley('kiss.png')"></img>
<img src='moneymouth.png' onmousedown="return addSmiley('moneymouth.png')"></img>
<img src='oneeye.png' onmousedown="return addSmiley('oneeye.png')"></img>
<img src='sad.png' onmousedown="return addSmiley('sad.png')"></img>
<img src='scream.png' onmousedown="return addSmiley('scream.png')"></img>
<img src='think.png' onmousedown="return addSmiley('think.png')"></img>
<img src='tongue.png' onmousedown="return addSmiley('tongue.png')"></img>
<img src='wink.png' onmousedown="return addSmiley('wink.png')"></img>
<img src='yell.png' onmousedown="return addSmiley('yell.png')"></img>

</html>
